<htmlform formName="Covid-19 Case Investigation"
          formDescription="Covid-19: Case Investigation"
          formEncounterType="422ee220-9e83-451d-9b25-79a688a0413a"
          formUuid="d3270bd2-7cb3-11eb-9439-0242ac130002"
          formVersion="3.0.0"
          formAddMetadata="yes"
          formUILocation="patientDashboard.visitActions"
          formOrder="1"
          formIcon="icon-medkit"
          formShowIf="(visit.active || !visit.active) &amp;&amp; patient.person.dead==false&amp;&amp; sessionLocation.uuid=='1748bd6f-b013-449f-8d38-91319b576f3f'"
          formDisplayStyle="Standard"
          formLabel="Covid-19 Case Investigation">
          
    <script type="text/javascript">

        if (jQuery) {

            jq(document).ready(function () { 

                //Block Multiple encounter entry on same date
                blockEncounterOnSameDateEncounter(jq("#encounterDate").find("input[type=hidden]"),"block");

                disable_fields("166301");
                disable_fields("166302");
                disable_fields("166295");
                disable_fields("166282");
                disable_fields("166283");
                disable_fields("163006");
                disable_fields("1646");
                disable_fields("165136");
                disable_fields("166286");
                disable_fields("166296");
                disable_fields("166297");
                disable_fields("165853");
                disable_fields("165929");
                //disable_fields("166301"); countries travelled
                disable_fields("166316");
                disable_fields("166308");
                disable_fields("166309");
                disable_fields("166310");

                jq("#1542").change(function () {
                    if (jq(this).find("select").find(":selected").val() == "5622") {
                        enable_fields("165136");
                    } else {
                        disable_fields("165136");
                    }
                });

                jq("#166280").change(function () {
                    if (jq(this).find("select").find(":selected").val() == "90002") {
                        enable_fields("166295");
                    } else {
                        disable_fields("166295");
                    }
                });

                jq("#166281").mouseover(function () {
                    if (getValue('166281.value') !== " ") {
                        enable_fields("166282");
                        enable_fields("166283");
                        enable_fields("163006");
                    } else {
                        disable_fields("166282");
                        disable_fields("166283");
                        disable_fields("163006");
                    }
                });

                jq("#166285").click(function () {
                    if (jq(this).find("input[type='radio']:checked").val() == "90003") {
                        enable_fields("166286");
                    } else {
                        disable_fields("166286"); 
                    }
                });

                jq(".90251").change(function () {
                    if (jq(this).find('#90002').find(':checkbox').prop('checked')) {
                        enable_fields("166296");
                    } else {
                        disable_fields("166296"); 
                    }
                });

                jq(".166319").change(function () {
                    if (jq(this).find('#90002').find(':checkbox').prop('checked')) {
                        enable_fields("166297");
                    } else {
                        disable_fields("166297"); 
                    }
                });

                jq("#166322").click(function () {
                    if (jq(this).find("input[type='radio']:checked").val() == "90003") {
                        enable_fields("166301");
                        enable_fields("166302");
                    } else {
                        disable_fields("166301");
                        disable_fields("166302"); 
                    }
                });

                jq(".166307").change(function () {
                    if (jq(this).find('#166304').find(':checkbox').prop('checked')) {
                        enable_fields("166308");
                        enable_fields("166309");
                        enable_fields("166310");
                    } else {
                        disable_fields("166308");
                        disable_fields("166309");
                        disable_fields("166310"); 
                    }
                });

                jq("#166300").click(function () {
                    if (jq(this).find("input[type='radio']:checked").val() == "166298") {
                        enable_fields("165853");
                        enable_fields("165929");
                    } else {
                        disable_fields("165853");
                        disable_fields("165929"); 
                    }
                });

                jq(".166317").change(function () {
                    if (jq(this).find('#90002').find(':checkbox').prop('checked')) {
                        enable_fields("166316");
                    } else {
                        disable_fields("166316"); 
                    }
                });
            });
        }
    </script>

    <div>
        <div class="row">
            <div class="col-md-6">
                <h1>Covid-19: Case Investigation Form</h1>
            </div>
            <div class="col-md-5"></div>
            <div class="col-md-1">
                <submit class="confirm" submitLabel="Save" submitStyle="customSubmit"/>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">
                        <ul class="nav nav-tabs nav-fill card-header-tabs">
                            <li class="nav-item">
                                <a class="nav-link active" data-toggle="tab" href="#patient-info-section">Patient Information</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#symptoms-comorbidity-section">Symptoms,Conditions and Comorbidity</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#travel-history-section">Travel History</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#disposition-section">Disposition</a>
                            </li>
                        </ul>
                    </div>
                    <div class="card-body">
                        <div class="tab-content">
                            <div class="tab-pane active" id="patient-info-section" >
                                <div class="card">
                                    <div class="card-header">
                                        Admission Information
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-4" id="visit-date">
                                                <label>Enrolment Date</label>
                                                <encounterDate default="today" disallowMultipleEncountersOnDate="block"/>
                                            </div>
                                            <div class="col-md-4">
                                                <label>Case ID</label>
                                                <obs conceptId="1646" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-header">
                                        Care Giver Information
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <label>Care Giver Name</label>
                                                <obs conceptId="165919" />
                                            </div>
                                            <div class="col-md-4">
                                                <label>Care Giver Phone Number</label>
                                                <obs conceptId="165924" />
                                            </div>
                                            <div class="col-md-4">
                                                <label>Care Giver Email</label>
                                                <obs conceptId="166270" /> 
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-header">
                                        Occupation and Country of Residence
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-3">
                                                    <label>Occupation</label>
                                                    <obs id="1542" conceptId="1542"
                                                         answerConceptIds="166272,159466,166273,5622"
                                                         answerLabels="Health Care Worker, Truck Driver, Surveillance Officer/Contact Tracer, Other Specify"/>
                                            </div>
                                            <div class="col-md-3">
                                                <label>Other Occupation</label>
                                                <obs id="165136" conceptId="165136"/>
                                            </div>

                                            <div class="col-md-3">
                                                <span class="">
                                                    <label>Country of Residence</label>
                                                    <obs id="166280" conceptId="166280"
                                                         answerConceptIds="166274,166275,166276,166277,166278,166279,90002"
                                                         answerLabels="Uganda, Kenya, Tanzania, Rwanda, DRC, S.Sudan, Other Specify "/>
                                                </span>
                                            </div>
                                            <div class="col-md-3">
                                                <label>Other Country of Residence</label>
                                                <obs id="166295" conceptId="166295"/>
                                            </div>

                                        </div>
                                    </div>
                                </div> 
                                <div class="card">
                                    <div class="card-header">
                                        Confirmed Case
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-4"> 
                                                <label>Date of Positive Lab Test</label>
                                                <obs id="166281" conceptId="166281"  allowFutureDates="false"/>
                                            </div>
                                            <div class="col-md-8 mt-4">
                                                <div class="row">
                                                    <div class="col-md-2"> 
                                                    <label>Test Type</label>
                                                    </div>
                                                    <obs id="166282" conceptId="166284" answerConceptId="166282" answerLabel="RDT Ag" style="checkbox" 
                                                         class="col-md-2"/>
                                                    <obs id="166283" conceptId="166284" answerConceptId="166283" answerLabel="RDT Ab" style="checkbox" 
                                                         class="col-md-2" />
                                                    <obs id="163006" conceptId="166284" answerConceptId="163006" answerLabel="PCR" style="checkbox" 
                                                         class="col-md-2" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div> 
                            </div>

                            <div class="tab-pane" id="symptoms-comorbidity-section" >
                                <div class="card">
                                    <div class="card-header">
                                        Patient Status
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-3">
                                                <label>Is Patient Symptomatic</label>
                                                <obs id="166285" conceptId="166285" answerConceptIds="90003,90004" answerLabels="Yes, No"
                                                     style="radio" class="horizontal"/>
                                            </div>
                                            <div class="col-md-3">
                                                <label>Date on Set of First Symptom</label>
                                                <obs id="166286" conceptId="166286" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-header"> 
                                        Symptoms
                                    </div>
                                    <div class="card-body 90251">
                                        <div class="row">
                                            <obs conceptId="90251" answerConceptId="871" answerLabel="History of Fever or Chils" style="checkbox" class="col-md-2"/>
                                            <obs conceptId="90251" answerConceptId="90132" answerLabel="Cough" style="checkbox" class="col-md-2" />
                                            <obs conceptId="90251" answerConceptId="158843" answerLabel="Sore Throat" style="checkbox" class="col-md-2" />
                                            <obs conceptId="90251" answerConceptId="165501" answerLabel="Runny Nose" style="checkbox" class="col-md-2"/>
                                            <obs conceptId="90251" answerConceptId="120749" answerLabel="Chest Pain Shortness of Breath" style="checkbox" class="col-md-3" />
                                        </div>
                                        <div class="row">
                                            <obs conceptId="90251" answerConceptId="90094" answerLabel="Headache" style="checkbox" class="col-md-2" />
                                            <obs conceptId="90251" answerConceptId="5980" answerLabel="Vomiting/Nausea" style="checkbox" class="col-md-2"/>
                                            <obs conceptId="90251" answerConceptId="149856" answerLabel="Diarrhoea" style="checkbox" class="col-md-2" />
                                            <obs conceptId="90251" answerConceptId="117" answerLabel="Conjunctivitis (Red Eyes) " style="checkbox" class="col-md-2" />
                                            <obs conceptId="90251" answerConceptId="151" answerLabel="Abdominal Pain" style="checkbox" class="col-md-3"/>
                                        </div>
                                        <div class="row">
                                            <obs conceptId="90251" answerConceptId="6034" answerLabel="Myalgia (Muscle Pain)" style="checkbox" class="col-md-2" />
                                            <obs conceptId="90251" answerConceptId="80" answerLabel="Arthralgia (Joint Pain)" style="checkbox" class="col-md-2" />
                                            <obs conceptId="90251" answerConceptId="512" answerLabel="Skin Rash" style="checkbox" class="col-md-2"/>
                                            <obs conceptId="90251" answerConceptId="5226" answerLabel="General Weakness" style="checkbox" class="col-md-2" />
                                            <obs conceptId="90251" answerConceptId="90105" answerLabel="Confusion/Altered Consciousness" style="checkbox" class="col-md-3"/>
                                        </div>
                                        <div class="row">    
                                            <obs conceptId="90251" answerConceptId="147241" answerLabel="Bleeding" style="checkbox" class="col-md-2" />
                                            <obs conceptId="90251" answerConceptId="166288" answerLabel="Bleeding Site" class="col-md-2"/>
                                            <obs conceptId="90251" answerConceptId="166287" answerLabel="Recent Inability to Walk" style="checkbox" class="col-md-2" />
                                            <obs conceptId="90251" answerConceptId="206" answerLabel="Seizures" style="checkbox" class="col-md-2" />

                                            <obs id="90002" conceptId="90251" answerConceptId="90002" answerLabel="Other" style="checkbox" class="col-md-4" />
                                        </div>
                                        <div class="row">
                                            <div class="col-md-4">
                                                <label>Specify Other</label>
                                                <obs id="166296" conceptId="166296" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-header">
                                       Presentation to facility and Diagnosis
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Date of first presentation to health facility</label>
                                                <obs conceptId="166290"/>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Was patient diagnosed with Covid as a result of this visit</label> 
                                                <obs conceptId="166289" answerConceptIds="90003, 90004, 1175" answerLabels="Yes, No, Not Applicable"
                                                     style="radio" class="horizontal"/>
                                            </div>
                                            <div class="col-md-6">
                                                <label>Was patient discharged home after this visit</label>
                                                <obs conceptId="166337" answerConceptIds="90003, 90004, 1175" answerLabels="Yes, No, Not Applicable"
                                                     style="radio" class="horizontal"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-header"> 
                                        Underlying Conditions
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <obs conceptId="90251" answerConceptId="90041" answerLabel="Pregnancy" style="checkbox" class="col-md-2"/>
                                        </div>
                                        <div class="row">
                                            <obs conceptId="90251" answerConceptId="166291" answerLabel="Post-Partum (&lt;6 Weeks)" style="checkbox" class="col-md-2"/>
                                            <obs conceptId="90251" answerConceptId="99601" answerLabel="Breast Feeding" style="checkbox" class="col-md-2" />
                                            <obs conceptId="90251" answerConceptId="162983" answerLabel="Est Gestational Age (weeks)" class="col-md-2" />
                                            <obs conceptId="90251" answerConceptId="166292" answerLabel="OR Trimester" class="col-md-2"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-header"> 
                                        Comorbidities
                                    </div>
                                    <div class="card-body 166319">
                                        <div class="row">
                                            <obs conceptId="90251" answerConceptId="166161" answerLabel="Chronic Cardiac Disease" style="checkbox" class="col-md-2"/>
                                            <obs conceptId="90251" answerConceptId="166318" answerLabel="Diabetes" style="checkbox" class="col-md-2" />
                                            <obs conceptId="90251" answerConceptId="117399" answerLabel="Hypertension" style="checkbox" class="col-md-2" />
                                            <obs conceptId="90251" answerConceptId="1455" answerLabel="Current Smoking" style="checkbox" class="col-md-2"/>
                                            <obs conceptId="90251" answerConceptId="1295" answerLabel="Chronic Pulmonary Disease" style="checkbox" class="col-md-3" />
                                        </div>
                                        <div class="row">
                                            <obs conceptId="90251" answerConceptId="58" answerLabel="Tuberculosis" style="checkbox" class="col-md-2" />
                                            <obs conceptId="90251" answerConceptId="121375" answerLabel="Asthma" style="checkbox" class="col-md-2"/>
                                            <obs conceptId="90251" answerConceptId="116030" answerLabel="Cancer" style="checkbox" class="col-md-2" />
                                            <obs conceptId="90251" answerConceptId="99094" answerLabel="Chronic Kidney Disease" style="checkbox" class="col-md-2" />
                                            <obs conceptId="90251" answerConceptId="160176" answerLabel="Chronic Neurological Disorder" style="checkbox" class="col-md-3" />
                                        </div>
                                        <div class="row">
                                            <obs conceptId="90251" answerConceptId="99095" answerLabel="Chronic Liver Disease" style="checkbox" class="col-md-2" />
                                            <obs conceptId="90251" answerConceptId="166294" answerLabel="Obesity" style="checkbox" class="col-md-2"/>
                                            <obs id="90002" conceptId="90251" answerConceptId="90002" answerLabel="Other" style="checkbox" class="col-md-2"/>
                                            <div class="col-md-4">
                                                <label>Specify Other</label>
                                                <obs conceptId="166297" id="166297"/>
                                            </div>
                                        </div>
                                        <div class="row"> <!-- conceptIDs  miss match 
                                            <obs conceptId="90251" answerConceptId="1169" answerLabel="HIV" style="checkbox" class="col-md-1"/>  attach answers to HIV concept -->
                                            <!-- <obs conceptId="165169" answerConceptId="99415" answerLabel="On ART" style="checkbox" class="col-md-1"/>
                                            <obs conceptId="165169" answerConceptId="165904" answerLabel="Not On ART" style="checkbox" class="col-md-2"/>
                                            <obs conceptId="165169" answerConceptId="90001" answerLabel="Unknown" style="checkbox" class="col-md-2"/> -->
                                        </div>

                                     </div>
                                </div>
                            </div>

                            <div class="tab-pane" id="travel-history-section" >
                                <div class="card">
                                    <div class="card-header">
                                       Travel History
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Did patient travel out of town in 2 weeks before on set (or sample taking, if no symptoms) </label>
                                            </div>
                                            <div class="col-md-2">
                                                <obs id="166322" conceptId="166322" answerConceptIds="90003,90004" answerLabels="Yes, No"
                                                     style="radio" class="horizontal"/>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-3">
                                                <label>Country</label>
                                                <obs id="166301" conceptId="166301" />
                                            </div>
                                            <div class="col-md-3">
                                                <label>City</label>
                                                <obs id="166302" conceptId="166302" />
                                            </div>
                                            <div class="col-md-3">
                                                <label>Date of arrival to this site</label>
                                                <obs conceptId="166320" />
                                            </div>
                                            <div class="col-md-3">
                                                <label>Date of departure to next site</label>
                                                <obs conceptId="166321" />
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6 166307">
                                                <label>Mode of Transport</label>
                                                <div class="row mt-3">
                                                <obs conceptId="166307" answerConceptId="166303" answerLabel="Air" style="checkbox" class="col-md-2"/>
                                                <obs id="166304" conceptId="166307" answerConceptId="166304" answerLabel="Public Road" style="checkbox" class="col-md-3" />
                                                <obs conceptId="166307" answerConceptId="166305" answerLabel="Private Road" style="checkbox" class="col-md-3" />
                                                <obs conceptId="166307" answerConceptId="166306" answerLabel="Water" style="checkbox" class="col-md-2"/>
                                                </div>
                                            </div>   
                                            <div class="col-md-6">
                                                <label>Public transport means</label>
                                                <div class="row mt-3 166304">
                                                <obs id="166308" conceptId="166304" answerConceptId="166308" answerLabel="Bus" style="checkbox" class="col-md-2"/>
                                                <obs id="166309" conceptId="166304" answerConceptId="166309" answerLabel="Matatu/Minibus" style="checkbox"
                                                     class="col-md-3" />
                                                <obs id="166310" conceptId="166304" answerConceptId="166310" answerLabel="Boda Boda" style="checkbox" class="col-md-3" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row"> <!-- if domestic travel -->
                                            <div class="col-md-3">
                                                <label>Travel Type</label>
                                                 <obs id="166300" conceptId="166300" answerConceptIds="166298,166299" answerLabels="Domestic, International"
                                                     style="radio" class="horizontal"/>
                                            </div>
                                            <div class="col-md-3">
                                                <label>District</label>
                                                <obs id="165853" conceptId="165853" />
                                            </div>
                                            <div class="col-md-3">
                                                <label>County</label>
                                                <obs id="165929" conceptId="165929" />
                                            </div>
                                            <!-- if international travel -->
                                            <div class="col-md-3">
                                                <label>Country/Countries</label> <!-- create concept for countries travelled -->
                                                <obs id="166301" conceptId="166301" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="disposition-section" >
                                <div class="card">
                                    <div class="card-header">
                                       Disposition
                                    </div>
                                    <div class="card-body 166317">
                                        <div class="row">
                                            <obs conceptId="166323" answerConceptId="166317" answerLabel="Admit to hospital" style="checkbox" class="col-md-3"/>
                                                <obs conceptId="166323" answerConceptId="166311" answerLabel="Admit to non-traditional isolation facility" style="checkbox" class="col-md-3" />
                                                <obs conceptId="166323" answerConceptId="166312" answerLabel="Home Isolation" style="checkbox" class="col-md-2" />
                                                <obs conceptId="166323" answerConceptId="160034" answerLabel="Died" style="checkbox" class="col-md-2" />
                                        </div>
                                        <div class="row"> <!-- if admitted to hospital -->
                                            <obs conceptId="166317" answerConceptId="166313" answerLabel="Isolation ward for suspect cases" style="checkbox"
                                                 class="col-md-3"/> 
                                            <obs conceptId="166317" answerConceptId="166314" answerLabel="Isolation ward for confirmed cases" style="checkbox" class="col-md-3" />
                                            <obs conceptId="166317" answerConceptId="166315" answerLabel="High dependency unit" style="checkbox" class="col-md-2" />
                                            <obs conceptId="166317" answerConceptId="161936" answerLabel="ICU" style="checkbox" class="col-md-2" />
                                        </div>
                                        <div class="row">
                                            <obs id="90002" conceptId="166317" answerConceptId="90002" answerLabel="Other" style="checkbox" class="col-md-3" />
                                            <obs id="166316" conceptId="166316" labelText="Specify Other" class="col-md-4"/> <!-- Not attached to parent -->
                                        </div>
                                    </div>    
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</htmlform>