<htmlform formName="Positive Infant Audit Tool"
          formDescription=""
          formUuid="177b5d5e-dd86-11ec-9d64-0242ac120002"
          formEncounterType="bd02a394-7ec1-4412-9061-5fedb68cbbf2"
          formVersion="1.0"
          formAddMetadata="yes"
          formUILocation="patientDashboard.overallActions"
          formOrder="1"
          formIcon="icon-exchange"
          formShowIf="patient.person.dead==false &amp;&amp; patient.person.age &lt; 6 "
          formDisplayStyle="Standard"
          formLabel="Positive Infant Audit Tool">
    <style>

        form label, .form label {
            float: none
            padding: 0px 10px 0 0;
        }

        form input[type="checkbox"], form input[type="radio"], .form input[type="checkbox"], .form input[type="radio"] {
            margin: 10px 15px;
        }

        table td {
            background: #FFFFFF;
            color: #404040;
        }

        form select, .form select {
            min-width: 0px;
        }

        form input, form select, form textarea, form ul.select, .form input, .form select, .form textarea, .form
        ul.select {
            background-color: #FBFBFB;
            border: 1px solid #CEC9C9;
            border-radius: 5px;
            margin-bottom: 10px;
            padding: 10px;
            min-width: 20%;
        }

        .row {
            display: inline-flex;
            clear: both;
        }

        .results_style {
            font-weight: bold;
            color: #0808fd;
        }

        .row .row-col2 {
            float: left;
            width: 50%;
        }

        table th, table td {
            border: 1px solid #AFAFAF;
        }

        #br {
            white-space: pre;
        }

        input[type="checkbox"] {
            margin: 0px 2px;
        }

        .obs-field {

        }

        .div-col2 {
            display: table-cell;
            margin-right: auto;
            margin-left: auto;
            width: 20%;
        }
    </style>
    <script type="text/javascript">
        if (jQuery) {
            jq(document).ready(function () {
                var patientuuid = '<lookup expression="patient.uuid"/>';
                var transferInName = getEncounterTypeName("3e8354f7-31b3-4862-a52e-ff41a1ee60af");
                var transferOutName = getEncounterTypeName("e305d98a-d6a2-45ba-ba2a-682b497ce27c");
            });



            function enable_disable_show_hide(triggerId, enabledDisabledId, conditionValue) {
                if (jq("#" + triggerId + " :selected").text() === conditionValue) {
                    showContainer('#' + enabledDisabledId);
                } else if (jq('#' + triggerId).find('span').text() === conditionValue) {
                    showContainer('#' + enabledDisabledId);
                } else {
                    hideContainer('#' + enabledDisabledId);

                }
            }


            function validateRequiredFieldsByValue(triggerId, validateFieldId, triggerValue, message_to_throw, validateFieldType) {
                var selected_value = jq("#" + triggerId).find(":selected").text().trim().toLowerCase();
                var validateFieldValue = "";

                if (validateFieldType === "input_text") {
                    validateFieldValue = jq("#" + validateFieldId).find("input:text").val();
                } else if (validateFieldType === "textarea") {
                    validateFieldValue = jq("#" + validateFieldId).find("textarea").value;
                }

                if (selected_value === triggerValue &amp;&amp; validateFieldValue === "") {
                    getField(validateFieldId + '.error').html(message_to_throw).show;
                    jq('#' + validateFieldId).find("span").removeAttr("style");

                    return false;
                }
                else {
                    return true;
                }
            }



        }
    </script>
    <div class="ai-page-frame">
        <div class="headers" style="text-align: center;">
            <h3 style="background: #94979A; padding: 10px;">Positive Infant Audit Form</h3>
        </div>

    <div class="card">

                <section>
                    <table class="enrollment">
                        <tbody>
                        <tr>
                            <th>Visit Information</th>
                            <th>Testing Information</th>
                            <th>Testing Results</th>
                            <th>ART Care and Treatment</th>
                        </tr>
                        <tr>
                            <td>
                                Date:
                                <encounterDate required="true"/>
                                <span style="display: none;"/>

                                <span class="hidden">
                                <encounterType id="encounter_type"
                                               default="bd02a394-7ec1-4412-9061-5fedb68cbbf2" required="true"/>
                                </span>
                                <span style="display: none;">
                                    <encounterLocation default="629d78e9-93e5-43b0-ad8a-48313fd99117"
                                                       order="629d78e9-93e5-43b0-ad8a-48313fd99117"/>
                                </span>
                                <br/>
                                <div style="width: 100%">
                                <label>Infant Age:</label>
                                <lookup complexExpression="$patient.age" />
                                </div>
                            </td>
                            <td>
                                <div style="width: 100%">
                                    <label>EXP Number</label>
                                    <patient field="identifier"
                                             identifierTypeId="2c5b695d-4bf3-452f-8a7c-fe3ee3432ffe"
                                             required="false"/>
                                </div>
                                <br/>

                                <div style="width: 100%">
                                    <label>Date of Sample Collection:</label>
                                    <lookup class="results_style" expression="fn.latestObs('99606').valueDatetime"/>
                                </div>

                                <div style="width: 100%">
                                    <label>Date of Sample Recieved at Lab:</label>
                                    <lookup class="results_style" expression="fn.latestObs('99606').valueDatetime"/>
                                </div>

                                <div style="width: 100%">
                                    <label>UNHLS Number</label>
                                </div>
                            </td>
                            <td>

                                <div style="width: 100%" class="lookup">
                                    <label>First PCR test Date:</label>
                                    <lookup class="results_style" expression="fn.latestObs('99606').valueDatetime"/>
                                </div>
                                <div style="width: 100%" class="lookup">
                                    <label>First PCR test result:</label>
                                    <lookup class="results_style" expression="fn.latestObs('99435').valueCoded.name"/>
                                </div>
                                <br/>
                                <div style="width: 100%" class="lookup">
                                    <label>PCR test Date at 9 Months :</label>
                                    <lookup class="results_style" expression="fn.latestObs('99436').valueDatetime"/>
                                </div>
                                <div style="width: 100%" class="lookup">
                                    <label> PCR test result at 9 Months:</label>
                                    <lookup class="results_style" expression="fn.latestObs('99440').valueCoded.name"/>
                                </div>

                            </td>
                            <td>
                                <div style="width: 100%">
                                    <label>Started on ART:</label>
                                    <lookup class="results_style" expression="fn.latestObs('163004').valueCoded.name"/>
                                </div>
                                <br/>
                                <div style="width: 100%">
                                    <label>ART Start Date:</label>
                                    <lookup class="results_style" expression="fn.latestObs('162980').valueDatetime"/>
                                </div>
                                <br/>
                                <div style="width: 100%">
                                    <label>ART Number:</label>
                                    <lookup class="results_style" expression="fn.latestObs('99751').valueText"/>
                                </div>
                                <br/>
                                <div style="width: 100%">
                                    <label>Infant Recieved NVP/ARVs:</label>
                                    <lookup class="results_style" expression="fn.latestObs('99787').valueCoded.name"/>
                                </div><br/>
                                <div style="width: 100%">
                                    <label>Infant Feeding Options</label>
                                    <lookup class="results_style" expression="fn.latestObs('99434').valueCoded.name"/>
                                </div><br/>

                            </td>
                        </tr>
                        </tbody>
                    </table>
                </section>
                <h3 style="background: #94979A; padding: 10px;">MOTHER'S INFORMATION</h3>
                <section>
                    <table class="enrollment">
                        <tbody>
                        <tr>
                            <th>Mother's Information</th>
                            <th>Most Recent Lab(Date done)</th>
                            <th>Current Clinic Status</th>
                        </tr>
                        <tr>
                            <td>
                                    <obs id="5910" conceptId="5910" labelText="Age"/>
                                <br/>
                                    <obs id="5910" conceptId="5910" labelText="Gestation Age at First ANC"/>
                                <br/>
                                    <obs id="166569" conceptId="166569" answerConceptIds="99416,165160" answerLabels="Home,Facility" labelText="Place of Delivery" />
                                 <br/>
                                    <obs id="166571" conceptId="166571" answerConceptIds="99738,166570,99601,90012" answerLabels="TRRK,Labour And Delivery,Breastfeeding,ANC" labelText="Timing of Positive Result" />
                               <br/>
                                    <obs id="166572" conceptId="166572" answerConceptIds="99152,166450,90002,1107,1067" answerLabels="Syphillis,Hep B,Other,None,Unknown" labelText="Other  STIs" />
                            </td>
                            <td>
                                    <obs id="166575" conceptId="166575" labelText="Period Initiated on ART:" answerConceptIds="166573,44,165973,166574" answerLabels="Before Pregnancy,During Pregnancy,At Birth,During Postnatal Period" />
                                <br/>

                                    <obs id="166576" labelText="Male Partner Status" conceptId="166576" answerConceptIds="703,664,90001" answerLabels="Positive,Negative, Unknown" />

                                <br/>
                                    <obs id="166579" labelText="Maternal Retention:" conceptId="166579" answerConceptIds="166577,165977,166578,1175" answerLabels="Less than 3 Months,6 Months, Greater than 12 Months, Not Applicable" />
                            </td>
                            <td>
                                    <obs id="99024" labelText="Duration on ART" conceptId="99024"/>
                                <br/>
                                    <obs id="166580" labelText="Ever Missed a doze:" conceptId="166580" answerConceptIds="90003,90004" answerLabels="Yes,No" />
                                <br/>
                                    <obs id="166581" labelText="Mother Failing on Treatment:" conceptId="166581" answerConceptIds="90003,90004" answerLabels="Yes,No" />
                                <br/>
                                    <obs id="166582" labelText="Latest Maternal Viral Load:" conceptId="166582" answerConceptIds="44,1180,90001" answerLabels="Pregnancy,Postpartum, Unknown" />

                            </td>
                        </tr>
                            <tr>
                                <td colspan="2"><label><span class="required">*</span>Provider</label>
                                    <encounterProvider required="true"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <section>
                    <submit/>
                </section>
            </div>
        </div>
        <br/>

</htmlform>